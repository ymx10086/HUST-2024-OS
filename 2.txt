compiling util/snprintf.c
compiling util/string.c
compiling util/hash_table.c
linking  obj/util.a ...
Util lib has been build into "obj/util.a"
compiling spike_interface/dts_parse.c
compiling spike_interface/spike_htif.c
compiling spike_interface/spike_utils.c
compiling spike_interface/spike_file.c
compiling spike_interface/spike_memory.c
linking  obj/spike_interface.a ...
Spike lib has been build into "obj/spike_interface.a"
compiling kernel/syscall.c
compiling kernel/elf.c
compiling kernel/proc_file.c
compiling kernel/ramdev.c
compiling kernel/vfs.c
compiling kernel/sched.c
compiling kernel/vmm.c
compiling kernel/strap.c
compiling kernel/hostfs.c
compiling kernel/process.c
compiling kernel/kernel.c
compiling kernel/pmm.c
compiling kernel/rfs.c
compiling kernel/machine/minit.c
compiling kernel/machine/mtrap.c
compiling kernel/strap_vector.S
compiling kernel/machine/mtrap_vector.S
compiling kernel/machine/mentry.S
linking obj/riscv-pke ...
PKE core has been built into "obj/riscv-pke"
compiling user/app_shell.c
compiling user/user_lib.c
linking hostfs_root/bin/app_shell ...
User app has been built into "hostfs_root/bin/app_shell"
compiling user/app_ls.c
linking hostfs_root/bin/app_ls ...
User app has been built into "hostfs_root/bin/app_ls"
compiling user/app_mkdir.c
linking hostfs_root/bin/app_mkdir ...
User app has been built into "hostfs_root/bin/app_mkdir"
compiling user/app_singlepageheap.c
linking hostfs_root/bin/app_singlepageheap ...
User app has been built into "hostfs_root/bin/app_singlepageheap"
compiling user/app_semaphore.c
linking hostfs_root/bin/app_semaphore ...
User app has been built into "hostfs_root/bin/app_semaphore"
compiling user/app_cow.c
linking hostfs_root/bin/app_cow ...
User app has been built into "hostfs_root/bin/app_cow"
compiling user/app_cd.c
linking hostfs_root/bin/app_cd ...
User app has been built into "hostfs_root/bin/app_cd"
compiling user/app_pwd.c
linking hostfs_root/bin/app_pwd ...
User app has been built into "hostfs_root/bin/app_pwd"
compiling user/app_touch.c
linking hostfs_root/bin/app_touch ...
User app has been built into "hostfs_root/bin/app_touch"
compiling user/app_cat.c
linking hostfs_root/bin/app_cat ...
User app has been built into "hostfs_root/bin/app_cat"
compiling user/app_echo.c
linking hostfs_root/bin/app_echo ...
User app has been built into "hostfs_root/bin/app_echo"
********************HUST PKE********************
spike obj/riscv-pke /bin/app_shell
HTIF is available!
Enter supervisor mode...
PKE kernel start 0x0000000080000000, PKE kernel end: 0x0000000080011000, PKE kernel size: 0x0000000000011000 .
free physical memory address: [0x0000000080011000, 0x0000000087ffffff] 
kernel memory manager is initializing ...
KERN_BASE 0x0000000080000000
physical address of _etext is: 0x0000000080009000
kernel page table is on 
RAMDISK0: base address of RAMDISK0 is: 0x0000000087f35000
RFS: format RAMDISK0 done!
Switch to user mode...
in alloc_proc. user frame 0x0000000087f29000, user stack 0x000000007ffff000, user kstack 0x0000000087f28000 
FS: created a file management struct for a process.
in alloc_proc. build proc_file_management successfully.
User application is loading.
Application: /bin/app_shell
CODE_SEGMENT added at mapped info offset:4
DATA_SEGMENT added at mapped info offset:5
Application program entry point (virtual address): 0x00000000000100b0
going to insert process 0 to ready queue.
going to schedule process 0 to run.

======== Shell Start ========

Author: Mingxin_Yang
Operating System: RISC-V

Mingxin_Yang@ymx:/ cross
Next command: cross 

==========Command Start============

User call fork.
will fork a child from parent 0.
in alloc_proc. user frame 0x0000000087f15000, user stack 0x000000007ffff000, user kstack 0x0000000087f0f000 
FS: created a file management struct for a process.
in alloc_proc. build proc_file_management successfully.
do_fork map code segment at pa:0000000087f13000 of parent to child at va:0000000000010000.
going to insert process 1 to ready queue.
going to schedule process 1 to run.
Application: cross
vfs_open: cannot open a directory!
Misaligned AMO!
System is shutting down with exit code -1.
